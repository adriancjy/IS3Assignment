<!DOCTYPE html>
<html>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAUS8dqZbJLDz-QblsFM1U8_0_lp6DvgHc&callback=initMap" async defer></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
$(document).ready(function(){

   $('#fileInput').change(function(){
var reader = new FileReader();
reader.onload = function(e){
alert(reader);
var text = reader.result;
alert(text);
var gpxDoc = $.parseXML(text);
var $xml = $(gpxDoc);
alert($xml.find('name').text());

$xml.find('trkpt').each(function(){
var lat = parseFloat($(this).attr('lat'));
var lon = parseFloat($(this).attr('lon'));

var marker = new google.maps.Marker({
    position: {lat: lat, lng: lon},
    map: map
});

});
};
reader.readAsText(this.files[0]);
}); 

$('select').change(function(){
    var value = $('select').val();
    //alert(value);
    if(value == 'party'){
        $.ajax({
  type: "GET",
  url: "http://localhost/party.gpx",
  dataType: "xml",
  success: function(xml) {
	var points = [];
    var bounds = new google.maps.LatLngBounds ();
    var count = parseInt($(xml).find('count').text());
    var name = $(xml).find('name').text();
for(var i = 0; i < count; i++){
    var result = name.split(',');
    
    var array = [count];
    //array.push(result[i]);
    array[i] = result[i];
    alert(array[i]);
    
    
}

	$(xml).find("trkpt").each(function() {
        var lat = parseFloat($(this).attr('lat'));
var lon = parseFloat($(this).attr('lon'));



	  var p = new google.maps.LatLng(lat, lon);
	  points.push(p);
      bounds.extend(p);
      var marker = new google.maps.Marker({
    position: {lat: lat, lng: lon},
    map: map
});
     
    });
    

	var poly = new google.maps.Polyline({
	  // use your own style here
	  path: points,
	  strokeColor: "#FF00AA",
	  strokeOpacity: .7,
	  strokeWeight: 4
	});
	
	poly.setMap(map);
	
	// fit bounds to track
	map.fitBounds(bounds);
  }
});
    }
    
});
});

    var map;
    function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
              center: {lat: 55.8721, lng: -4.2882},
              zoom: 8
            });
          }
    </script>
<head>
  
 <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 70%;
		width:100%;
		
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
	  
	  body {
	  background-color:grey;
	  }
    </style>
<h1>Hello World.</h1>
</head>
<body>
    <select>
        <option value="" selected disabled hidden>===Select an option===</option>
        <option value="stud">Student</option>
        <option value="party">Party Animal</option>
        <option value="business">Business Man</option>
        
      </select>
<input type="file" name="fileInput" id="fileInput">
<div id="map">
</div>
</body>
</html>